(function($){var isIphone=(window.orientation!=undefined);$.extend({mask:{rules:{'z':/[a-z]/,'Z':/[A-Z]/,'a':/[a-zA-Z]/,'*':/[ 0-9a-zA-Z]/,'@':/[0-9a-zA-ZÃ§Ã‡Ã¡Ã Ã£Ã©Ã¨Ã­Ã¬Ã³Ã²ÃµÃºÃ¹Ã¼]/,'#':/[0-9.]/},fixedChars:'[(),.:/-]',ignoreKeys:[8,9,13,16,17,18,32,33,34,35,36,37,38,39,40,45,46,91,116],iphoneIgnoreKeys:[32,10,127],signals:['+','-'],options:{attr:'alt',mask:null,type:'fixed',defaultValue:'',signal:false,onInvalid:function(){},onValid:function(){},onOverflow:function(){}},masks:{'phone':{mask:'(99)9999-9999'},'phone-us':{mask:'(999)9999-9999'},'cpf':{mask:'999.999.999-99'},'cnpj':{mask:'99.999.999/9999-99'},'date':{mask:'39/19/9999'},'date-time':{mask:'39/19/9999 29:69'},'date-us':{mask:'19/39/9999'},'cep':{mask:'99999-999'},'time':{mask:'29:69'},'cc':{mask:'9999 9999 9999 9999'},'integer':{mask:'999.999.999.999',type:'reverse'},'decimal':{mask:'99,999.999.999.999',type:'reverse',defaultValue:'000'},'decimal-us':{mask:'99.999,999,999,999',type:'reverse',defaultValue:'000'},'signed-decimal':{mask:'99,999.999.999.999',type:'reverse',defaultValue:'+000'},'signed-decimal-us':{mask:'99,999.999.999.999',type:'reverse',defaultValue:'+000'},'numeric':{mask:'99999999999999',type:'reverse'},'noespecial':{mask:'******************************'},'ie':{mask:'##################'}},MAXLENGTH:{ie:2147483647},init:function(){if(!this.hasInit){var i;this.ignore=false;this.fixedCharsReg=new RegExp(this.fixedChars);this.fixedCharsRegG=new RegExp(this.fixedChars,'g');for(i=0;i<=9;i++)this.rules[i]=new RegExp('[0-'+i+']');this.hasInit=true;}},set:function(el,options){var maskObj=this,$el=$(el),mlStr='maxlength';this.init();return $el.each(function(){var $this=$(this),o=$.extend({},maskObj.options),attrValue=$this.attr(o.attr),tmpMask='',pasteEvent=maskObj.__getPasteEvent();tmpMask=(typeof options=='string')?options:(attrValue!='')?attrValue:null;if(tmpMask)o.mask=tmpMask;if(maskObj.masks[tmpMask])o=$.extend(o,maskObj.masks[tmpMask]);if(typeof options=='object')o=$.extend(o,options);if($.metadata)o=$.extend(o,$this.metadata());if(o.mask!=null){if($this.data('mask'))maskObj.unset($this);var defaultValue=o.defaultValue,mlValue=$this.attr(mlStr),reverse=(o.type=='reverse');o=$.extend({},o,{maxlength:mlValue,maskArray:o.mask.split(''),maskNonFixedCharsArray:o.mask.replace(maskObj.fixedCharsRegG,'').split(''),defaultValue:defaultValue.split('')});if(reverse)$this.css('text-align','right');if($this.val()!='')$this.val(maskObj.string($this.val(),o));else if(defaultValue!='')$this.val(maskObj.string(defaultValue,o));$this.data('mask',o);switch(true){case($.browser.msie):$this.attr(mlStr,maskObj.MAXLENGTH.ie);break;case($.browser.safari):$this.removeAttr(mlStr);break;default:if(mlValue>-1){$this.removeAttr(mlStr);}
break;}
$this.bind('keydown',{func:maskObj._keyDown,thisObj:maskObj},maskObj._onMask).bind('keyup',{func:maskObj._keyUp,thisObj:maskObj},maskObj._onMask).bind('keypress',{func:maskObj._keyPress,thisObj:maskObj},maskObj._onMask).bind(pasteEvent,{func:maskObj._paste,thisObj:maskObj},maskObj._delayedOnMask);}});},unset:function(el){var $el=$(el),_this=this;return $el.each(function(){var $this=$(this);if($this.data('mask')){var maxLength=$this.data('mask').maxlength,pasteEvent=_this.__getPasteEvent();if(maxLength==-1)
$this.removeAttr('maxlength');else
$this.attr('maxlength',maxLength);$this.unbind('keydown',_this._onMask).unbind('keypress',_this._onMask).unbind('keyup',_this._onMask).unbind(pasteEvent,_this._delayedOnMask).removeData('mask');}});},string:function(str,options){this.init();var o={};if(typeof str!='string')str=String(str);switch(typeof options){case'string':if(this.masks[options])o=$.extend(o,this.masks[options]);else o.mask=options;break;case'object':o=options;break;}
var reverse=(o.type=='reverse');this._insertSignal(reverse,str,o,this.signals);return this.__maskArray(str.split(''),o.mask.replace(this.fixedCharsRegG,'').split(''),o.mask.split(''),reverse,o.defaultValue,o.signal);},_onMask:function(e){var thisObj=e.data.thisObj,o={};o._this=e.target;o.$this=$(o._this);if(o.$this.attr('readonly'))return true;o.value=o.$this.val();o.nKey=thisObj.__getKeyNumber(e);o.range=thisObj.__getRangePosition(o._this);o.valueArray=o.value.split('');o.data=o.$this.data('mask');o.reverse=(o.data.type=='reverse');return e.data.func.call(thisObj,e,o);},_delayedOnMask:function(e){e.type='paste';setTimeout(function(){e.data.thisObj._onMask(e)},1);},_keyDown:function(e,o){if(isIphone){this.ignore=($.inArray(o.nKey,this.iphoneIgnoreKeys)>-1);return this._keyPress(e,o);}else{this.ignore=($.inArray(o.nKey,this.ignoreKeys)>-1);return true;}},_keyUp:function(e,o){return this._paste(e,o);},_paste:function(e,o){this._changeSignal(e.type,o);var $thisVal=this.__maskArray(o.valueArray,o.data.maskNonFixedCharsArray,o.data.maskArray,o.reverse,o.data.defaultValue,o.data.signal);o.$this.val($thisVal);if(!o.reverse)this.__setRange(o._this,o.range.start,o.range.end);return true;},_keyPress:function(e,o){if(this.ignore||e.ctrlKey||e.metaKey||e.altKey){o.data.onValid.call(o._this,'',o.nKey);return true;}
this._changeSignal(e.type,o);var c=String.fromCharCode(o.nKey);rangeStart=o.range.start,rawValue=o.value,maskArray=o.data.maskArray;if(o.reverse){var valueStart=rawValue.substr(0,rangeStart),valueEnd=rawValue.substr(o.range.end,rawValue.length);rawValue=(valueStart+c+valueEnd);if(o.data.signal)rangeStart-=o.data.signal.length;}
var valueArray=rawValue.replace(this.fixedCharsRegG,'').split(''),extraPos=this.__extraPositionsTill(rangeStart,maskArray);o.rsEp=rangeStart+extraPos;if(!this.rules[maskArray[o.rsEp]]){o.data.onOverflow.call(o._this,c,o.nKey);return false;}
else if(!this.rules[maskArray[o.rsEp]].test(c)){o.data.onInvalid.call(o._this,c,o.nKey);return false;}
else o.data.onValid.call(o._this,c,o.nKey);var $thisVal=this.__maskArray(valueArray,o.data.maskNonFixedCharsArray,maskArray,o.reverse,o.data.defaultValue,o.data.signal,extraPos);o.$this.val($thisVal);if(o.reverse)
return this._keyPressReverse(e,o);else
return this._keyPressFixed(e,o);},_keyPressFixed:function(e,o){if(o.rangeStart==o.range.end||o.data.defaultValue){if((o.rsEp==0&&o.value.length==0)||o.rsEp<o.value.length){this.__setRange(o._this,o.rsEp,o.rsEp+1);}}
else
this.__setRange(o._this,o.rangeStart,o.range.end);return true;},_keyPressReverse:function(e,o){return false;},_setMaskData:function($input,key,value){var data=$input.data('mask');data[key]=value;$input.data('mask',data);},_changeSignal:function(eventType,o){if(o.data.signal!==false){var inputChar=(eventType=='paste')?o.value.substr(0,1):String.fromCharCode(o.nKey);if($.inArray(inputChar,this.signals)>-1){if(inputChar=='+')inputChar='';this._setMaskData(o.$this,'signal',inputChar);o.data.signal=inputChar;}}},_insertSignal:function(reverse,str,o,signals){if(reverse&&o.defaultValue){if(typeof o.defaultValue=='string')o.defaultValue=o.defaultValue.split('');if($.inArray(o.defaultValue[0],signals)>-1){var maybeASignal=str.substr(0,1);o.signal=($.inArray(maybeASignal,signals)>-1)?maybeASignal:o.defaultValue[0];o.defaultValue.shift();}}},__getPasteEvent:function(){return($.browser.opera||($.browser.mozilla&&parseFloat($.browser.version.substr(0,3))<1.9))?'input':'paste';},__getKeyNumber:function(e){return(e.charCode||e.keyCode||e.which);},__maskArray:function(valueArray,maskNonFixedCharsArray,maskArray,reverse,defaultValue,signal,extraPos){if(reverse)valueArray.reverse();valueArray=this.__removeInvalidChars(valueArray,maskNonFixedCharsArray);if(defaultValue)valueArray=this.__applyDefaultValue.call(valueArray,defaultValue);valueArray=this.__applyMask(valueArray,maskArray,extraPos);if(reverse){valueArray.reverse();if(!signal||signal=='+')signal='';return signal+valueArray.join('').substring(valueArray.length-maskArray.length);}
else
return valueArray.join('').substring(0,maskArray.length);},__applyDefaultValue:function(defaultValue){var defLen=defaultValue.length,thisLen=this.length,i;for(i=thisLen-1;i>=0;i--){if(this[i]==defaultValue[0])this.pop();else break;}
for(i=0;i<defLen;i++){if(!this[i])
this[i]=defaultValue[i];}
return this;},__removeInvalidChars:function(valueArray,maskNonFixedCharsArray){for(var i=0;i<valueArray.length;i++){if(maskNonFixedCharsArray[i]&&this.rules[maskNonFixedCharsArray[i]]&&!this.rules[maskNonFixedCharsArray[i]].test(valueArray[i])){valueArray.splice(i,1);i--;}}
return valueArray;},__applyMask:function(valueArray,maskArray,plus){if(typeof plus=='undefined')plus=0;for(var i=0;i<valueArray.length+plus;i++){if(maskArray[i]&&this.fixedCharsReg.test(maskArray[i]))
valueArray.splice(i,0,maskArray[i]);}
return valueArray;},__extraPositionsTill:function(rangeStart,maskArray){var extraPos=0;while(this.fixedCharsReg.test(maskArray[rangeStart])){rangeStart++;extraPos++;}
return extraPos;},__setRange:function(input,start,end){if(typeof end=='undefined')end=start;if(input.setSelectionRange){input.setSelectionRange(start,end);}else{var range=input.createTextRange();range.collapse();range.moveStart("character",start);range.moveEnd("character",end-start);range.select();}},__getRangePosition:function(input){var result={start:0,end:0};if(input.setSelectionRange){result.start=input.selectionStart;result.end=input.selectionEnd;}
else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();var r2=range.duplicate();result.start=0-r2.moveStart('character',-100000);result.end=result.start+range.text.length;}
return result;}}});$.fn.extend({setMask:function(options){return $.mask.set(this,options);},unsetMask:function(){return $.mask.unset(this);}});})(jQuery);